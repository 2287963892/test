<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
  </style>
<script>
	function getAjax(){
	var $count=count.value;
  var $pno=pno.value;
  var xhr=new XMLHttpRequest();
	xhr.onreadystatechange=function(){
	if(xhr.readyState==4 && xhr.status==200){
	var result=xhr.responseText;	
  result=JSON.parse(result);
	var htmlstr=`
	<table border="1px" cellspacing="0">
		<tr>
			<th>uid</th>
			<th>uname</th>
			<th>upwd</th>
			<th>email</th>
			<th>phone</th>
			<th>avatar</th>
			<th>user_name</th>
			<th>gender</th>
			<th>操作</th>
		</tr>
	`;
for (var i=0;i<result.length ;i++ )
{
			htmlstr+=`	<tr>
		<td>${result[i].uid}</td>
		<td>${result[i].uname}</td>
		<td>${result[i].upwd}</td>
		<td>${result[i].email}</td>
		<td>${result[i].phone}</td>
		<td>${result[i].avatar}</td>
		<td>${result[i].user_name}</td>
		<td>${result[i].gender==1?"男":result[i].gender==0?"女":"未知"}</td>
		<th><a href="javascript:deluser(${result[i].uid})">删除</a><a href="">修改</a></th>
	</tr>`;
		}
		htmlstr+=`</table>`;
		d1.innerHTML=htmlstr;
	}
}
	xhr.open("get",`/user/list?count=${$count}&pno=${$pno}`,true);
	xhr.send(null);
};	
	function deluser($uid){
		var xhr=new XMLHttpRequest();
	xhr.onreadystatechange=function(){
	if(xhr.readyState==4 && xhr.status==200){
		var result=xhr.responseText;
		if(result=="1"){
			getAjax();
			}
		}
	}
	xhr.open("delete",`/user/v1/delete/${$uid}`,true);
	xhr.send(null);
}
</script>
</head>
<body onload="getAjax()">
  <div class="box">
  大小：<input type="text" id="count"><br>
  页码：<input type="text" id="pno"><br>
  <button onclick="getAjax()">查询</button>
	<div id="d1">
 </div>
</form>
</div>
</body>
</html>
